
#! /usr/bin/python
import DMPSW
import libDmpSimu as  DmpSim
import os, sys
nevents = os.getenv("NEVENTS_GENERATED",10000)

#-------------------------------------------------------------------
# IOSvc options
DMPSW.IOSvc.Set("OutData/FileName","dmpsimu.root")
DMPSW.IOSvc.Set("OutData/Tag","Sim")

DMPSW.Core.Set("LogLevel",os.getenv("LOG_LEVEL","INFO"))    #@ Possible options are:  NONE, ERROR, WARNING, INFO, DEBUG
DMPSW.Core.Set("EventNumber","%i"%nevents)
SimAlg   = DmpSim.DmpSimAlg()                     #@ Get instance of DAMPE simulation tool (interface to geant4)
SimAlg.Set("StoreSteps","false")
SimAlg.Set("MacFile", "G4macro.mac")
#@ Geant4 random seed
SimAlg.Set("RandomSeed", os.getenv("DWF_SIXDIGIT",0)) # <-- uncomment this to set up a random seed

#@ Simulation configuration file
#@   The config file used: Simulation/share/dmpSimu.cfg
#@   This configuration file is installed to $DMPSWSYS/share/Configuration/dmpSimu.cfg
#@   To use your custom configuration, replace the default config file $DMPSWSYS/share/Configuration/dmpSimu.cfg with the one of your choice
#@
DMPSW.AlgMgr.Append(SimAlg)
SimuCfgPsr = DmpSim.SimuCfgParser()
DMPSW.SvcMgr.Append(SimuCfgPsr)
DMPSW.SvcMgr.Append(DMPSW.GeoMgr)

DMPSW.Core.Initialize()
#raise SystemExit
DMPSW.Core.Run()
DMPSW.Core.Finalize()
